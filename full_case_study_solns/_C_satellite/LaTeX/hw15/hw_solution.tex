From HW~\ref{ds:satellite}.\ref{chap:transfer_function_models}, the transfer function for the inner loop of the satellite attitude problem is 
\begin{equation}\label{eq:hw_bode_satellite_in_tf}
%P_{in}(s) = \frac{1/J_s}{s^2+\frac{b}{J_s}s+\frac{k}{J_s}} = 
%\frac{0.2}{s^2 + 0.01s + 0.03}.
P_{in}(s) = \frac{1}{(J_s + J_p)s^2} = 
\frac{1}{6s^2}. 
\end{equation}
In Bode canonical form we have
\[
%P_{in}(j\omega) = \frac{6.67}{1+0.33j\omega + \left(j\frac{\omega}{0.173}\right)^2}
P_{in}(j\omega) = \frac{1}{6}\frac{1}{(j\omega)(j\omega)}.
\]
Therefore,
\begin{equation} \label{eq:hw_bode_satellite_in}
%20\log_{10}\abs{P_{in}(j\omega)}=
%	20\log_{10} 6.67 
%	-20\log_{10}\abs{1+0.33j\omega + \left(j\frac{\omega}{0.173}\right)^2}
20\log_{10}\abs{P_{in}(j\omega)}=
	20\log_{10} 1/6-20\log_{10}\abs{\omega}-20\log_{10}\abs{\omega}
\end{equation}
Therefore, the Bode plot for magnitude will be the graphical addition of a constant gain and two straight lines passing through the 0 dB line at $\omega = 1$ with a slope of -20 dB/decade.
Similarly, the phase is given by
\[
%\angle P_{in}(j\omega) = 
%	\angle 6.67 
%	- \angle \left(1+0.33j\omega + \left(j\frac{\omega}{0.173}\right)^2\right).
\angle P_{in}(j\omega) = 
\angle 1/6 
- \angle j\omega - \angle j\omega.
\]
The Bode plot generated by Matlab is shown in \fref{fig:hw_satellite_bode_in}. As can be seen from the figure, the straight-line approximation corresponds directly with the Bode plot in this case.
\controlbookfigure{0.8}
	{6_design_studies/figures/hw_satellite_bode_in}
	{Bode plot for the transfer function given in Equation~\eqref{eq:hw_bode_satellite_in}.}
	{fig:hw_satellite_bode_in}
	
The Python command to generate the Bode plot is
\begin{lstlisting}
import matplotlib.pyplot as plt
import control as cnt

P_in = cnt.tf([1], [6.0, 0, 0])
plt.figure(1), plt.clf(), cnt.bode(P_in, dB=True)
\end{lstlisting}

From HW~\ref{ds:satellite}.\ref{chap:transfer_function_models}, the transfer function for the outer loop of the satellite is 
\begin{equation}\label{eq:hw_bode_satellite_out_tf}
P_{out}(s) = \frac{\frac{b}{J_p}s+\frac{k}{J_p}}{s^2+\frac{b}{J_p}s+\frac{k}{J_p}} =
\frac{0.05s + 0.15}{s^2+0.05s+0.15}. 
\end{equation}
In Bode canonical form we have
\[
P_{out}(j\omega) = \frac{1+j\frac{\omega}{3}}{1+j\frac{\omega}{3} + \left(j\frac{\omega}{0.3873}\right)^2}
\]
Therefore
\begin{multline} \label{eq:hw_bode_satellite_out}
20\log_{10}\abs{P_{out}(j\omega)}=
	20\log_{10} \abs{1+j\omega/3} \\
	-20\log_{10}\abs{1+j\omega/3 + \left(j\frac{\omega}{0.3873}\right)^2}
\end{multline}
Therefore, the Bode plot for magnitude will be the graphical addition of a zero, and a complex pole.
Similarly, the phase is given by
\[
\angle P_{out}(j\omega) = 
	\angle \left(1+j\omega/3\right)
	- \angle \left(1+j\omega/3 + \left(j\frac{\omega}{0.3873}\right)^2\right).
\]
The straight-line approximation as well as the Bode plot generated by Matlab are shown in \fref{fig:hw_satellite_bode_out}.
\controlbookfigurefullpage{0.7}
	{6_design_studies/figures/hw_satellite_bode_out}
	{Bode plot for the transfer function given in Equation~\eqref{eq:hw_bode_satellite_out}.}
	{fig:hw_satellite_bode_out}

The Python command to generate the Bode plot is
\begin{lstlisting}
import matplotlib.pyplot as plt
import control as cnt

P_out = cnt.tf([0.05, 0.15], [1, 0.05, 0.15])
plt.figure(2), plt.clf(), cnt.bode(P_out, dB=True)
\end{lstlisting}
